<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport"    content="width=device-width, initial-scale=1.0" />
    <meta name="author"      content="Team Kil-A-Bytes">
    <meta name="description" content="INFO 1601 Project for team Kil-A-Bytes 'The Food Vault'">
    <link rel="stylesheet"   href="../style.css">
    <title>Catalogue</title>
    <style>
      fieldset {
        border: 2px solid; 
        border-radius: 10px; 
        background-color: white; 
        width: 70%;
        margin: 0 auto;
      }
    </style>
    <script>
      // Stop auto open chatarea on load
      window.onload = function() {
        document.getElementById("chatbot-area").style.display = "none";
      }
    </script>
  </head>
  
  <body>
    <!-- Main View -->
    <main id="app">
      <div>
        
        <!-- Side Nav Chat-area -->
        <div id="chatbot-area" class="side-nav">
          <a href="javascript:void(0)" class="closebutton" onclick="closeChatArea()">&times;</a>
          <iframe id="annabot-iframe" src="https://tfv-annabot.herokuapp.com/s/chat" frameborder="1" width="90%" height="90%"></iframe>
        </div>
        
        <!-- Main page content -->
        <div id="page-content">

          <!-- Main Navigation bar for top of page -->
          <nav id="main-nav-bar" class="nav-bar">
            <ul class="links-container">
              <a href="../index.html"><button>Home</button></a>
              <a href="../testimonials/testimonials.html"><button>Testimonials</button></a>
              <a href="../catalogue/catalogue.html"><button class="selected">Catalogue</button></a>
            </ul>
          </nav>

          <!-- Catalogue filter area -->
          <section id="filter-section">
            <br><br>
            <h2><b>Browse Our Catalogue</b></h2>
            <hr><br>
            
            <fieldset>
              <form id="filter-catalogue">

                <label>Choose a cuisine/style:</label>
                <br>
                <select id="cuisine-selections">
                  <option value="undecided">Any</option>
                  <option value="thai">Thai</option>
                  <option value="indian">Indian</option>
                  <option value="chinese">Chinese</option>
                </select>
                <br><br>

                <label>Choose a location:</label>
                <br>
                <select id="area-selections">
                  <option value="all">Anywhere</option>
                  <option value="chag">Chaguanas</option>
                  <option value="pos">Port of Spain</option>
                  <option value="sanfernando">San Fernando</option>
                  <option value="siparia">Siparia</option>
                </select>
                <br><br>

                <label>Choose a rating:</label>
                <br>
                <select id="rating-selections">
                  <option value="rating">Any</option> <!-- if the rating does not matter -->
                  <option value="star1">1</option>
                  <option value="star2">2</option>
                  <option value="star3">3</option>
                  <option value="star4">4</option>
                  <option value="star5">5</option>
                </select>
                <br><br>
                <input type="button" value="Show Me Places!" onclick="getRestaurantListing()">
      
                <p>(You can always search our entire catalogue for all areas by searching from the get-go!)</p>
              </form>
            </fieldset>
    
            <!-- Restaurant Listing from Database -->
            <div id="restaurant-listing" class="vertical-">
              <h3>*Restaurant Listing Here*</h3>
            </div>
          </section>
        </div>

      </div>
    </main>

    <!-- Button to Expand Chat-area -->
    <button id="fixed-button" onclick="openChatArea()">Expand Chat</button>

    <!-- Footer -->
    <footer>
      <br><br><hr>
        <div class="horizontal-container">
          <p>Find Us @</p>
          <div class="vertical-container" style="width: 170px;">
            <a href="https://www.instagram.com/thefoodvault">
              <img src="images/instagram.png" alt="Instagram" width="30" height="30">
            </a>
            <a href="https://www.twitter.com/thefoodvault">
              <img src="images/twitter.png" alt="Twitter" width="30" height="30">
            </a>
          </div>
          <div id="trademark">
            </p>
            <p>
              &copy; The Food Vault by Team Kil-A-Bytes
            </p>
          </div>
        </div>
    </footer>

    <!-- Side nav controls -->
    <script>

      function openChatArea() {
        document.getElementById("chatbot-area").style.width = "390px";
        document.getElementById("page-content").style.marginLeft = "510px";
      }

      function closeChatArea() {
        document.getElementById("chatbot-area").style.width = "0";
        document.getElementById("page-content").style.marginLeft = "0";
      }

      function getRestaurantListing() {
        var area = document.getElementById("area-selections").value;
        var cuisine = document.getElementById("cuisine-selections").value;
        var rating = document.getElementById("rating-selections").value;

        if (cuisine == "undecided") {
          cuisine = "";
        }
        if (rating == "rating") {
          rating = "";
        }

        // AJAX request to get the restaurant listing from the NocoDB database via GET request
        let response = fetch("https://nocodb.herokuapp.com/api/restaurants?area=" + area + "&cuisine=" + cuisine + "&rating=" + rating);
      }
    </script>

  </body>
</html>